echo "ğŸ§ª Running tests..."
bun test scripts/__tests__

TEST_EXIT_CODE=$?

# Always clean test artifacts, even if tests fail
echo ""
echo "ğŸ§¹ Cleaning test artifacts..."
bun scripts/cleanup-test-artifacts.ts

if [ $TEST_EXIT_CODE -ne 0 ]; then
  echo "âŒ Tests failed. Push blocked."
  exit 1
fi

echo "âœ… Tests passed!"
exit 0
